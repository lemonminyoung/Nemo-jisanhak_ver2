========================================
í™”í•™ë¬¼ì§ˆ ì•ˆì „ì„± ë¶„ì„ API - ì‚¬ìš© ê°€ì´ë“œ
========================================

ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸
-----------------
Base URL: https://chemical-analyzer-v2.onrender.com


1ï¸âƒ£ Health Check (ì„œë²„ ìƒíƒœ í™•ì¸)
==================================

GET /health

ì‘ë‹µ:
{
  "status": "healthy",
  "version": "2.0-gemini-compact",
  "ai_provider": "Google Gemini"
}


2ï¸âƒ£ í™”í•™ë¬¼ì§ˆ ë¶„ì„ (ë©”ì¸ API)
=============================

POST /hybrid-analyze
Content-Type: application/json

ğŸ“¥ ì…ë ¥ í¬ë§·
-----------
{
  "substances": ["ë¬¼ì§ˆëª…1", "ë¬¼ì§ˆëª…2", ...],
  "use_ai": true
}

- substances: í™”í•™ë¬¼ì§ˆ ì˜ë¬¸ëª… ë°°ì—´ (2ê°œ ì´ìƒ)
- use_ai: AI ìš”ì•½ ì‚¬ìš© ì—¬ë¶€ (true/false)
  - true: AI ìš”ì•½ í¬í•¨ (2-5ë¶„)
  - false: ê·œì¹™ ê¸°ë°˜ë§Œ (ë” ë¹ ë¦„)


ğŸ“¤ ì¶œë ¥ í¬ë§·
-----------
{
  "success": true,
  "simple_response": {
    "risk_level": "ìœ„í—˜",  // "ìœ„í—˜", "ì£¼ì˜", "ì•ˆì „"
    "message": "2ê°€ì§€ ìœ„í—˜í•œ ì¡°í•©ì´ ë°œê²¬ë˜ì—ˆì–´ìš”.\n\në½ìŠ¤ì™€ ì•”ëª¨ë‹ˆì•„ê°€ ë§Œë‚˜ë©´..."
  },
  "safety_links": {
    "msds_links": [
      {
        "title": "ë¬´ìˆ˜ ì•”ëª¨ë‹ˆì•„ ì•ˆì „ë³´ê±´ìë£Œ",
        "url": "https://msds.kosha.or.kr/...",
        "description": "ë¬´ìˆ˜ ì•”ëª¨ë‹ˆì•„ì˜ ìƒì„¸ ì•ˆì „ ì •ë³´..."
      }
    ],
    "general_resources": [
      {
        "title": "MSDS í†µí•©ê²€ìƒ‰ (ì•ˆì „ë³´ê±´ê³µë‹¨)",
        "url": "https://msds.kosha.or.kr/",
        "description": "ëª¨ë“  í™”í•™ë¬¼ì§ˆì˜ MSDS ê²€ìƒ‰"
      }
    ]
  },
  "error": null
}


ğŸ”§ ì‚¬ìš© ì˜ˆì‹œ
============

ì˜ˆì‹œ 1: cURL
-------------
curl -X POST https://chemical-analyzer-v2.onrender.com/hybrid-analyze \
  -H "Content-Type: application/json" \
  -d '{
    "substances": ["Bleach", "Ammonia"],
    "use_ai": true
  }'


ì˜ˆì‹œ 2: JavaScript (Fetch)
---------------------------
const response = await fetch('https://chemical-analyzer-v2.onrender.com/hybrid-analyze', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    substances: ['Bleach', 'Ammonia'],
    use_ai: true
  })
});

const data = await response.json();
console.log(data.simple_response.risk_level);  // "ìœ„í—˜"
console.log(data.simple_response.message);      // AI ìš”ì•½ ë©”ì‹œì§€


ì˜ˆì‹œ 3: Python (Requests)
--------------------------
import requests

response = requests.post(
    'https://chemical-analyzer-v2.onrender.com/hybrid-analyze',
    json={
        'substances': ['Bleach', 'Ammonia'],
        'use_ai': True
    },
    timeout=300  # 5ë¶„
)

data = response.json()
print(data['simple_response']['risk_level'])  # "ìœ„í—˜"


ì˜ˆì‹œ 4: Axios (React/Node.js)
------------------------------
import axios from 'axios';

const { data } = await axios.post(
  'https://chemical-analyzer-v2.onrender.com/hybrid-analyze',
  {
    substances: ['Bleach', 'Ammonia'],
    use_ai: true
  },
  { timeout: 300000 }  // 5ë¶„
);

const riskLevel = data.simple_response.risk_level;
const message = data.simple_response.message;


âš ï¸ ì¤‘ìš” ì‚¬í•­
============

1. Timeout ì„¤ì •
   - ë°˜ë“œì‹œ 5ë¶„(300ì´ˆ) ì´ìƒìœ¼ë¡œ ì„¤ì •
   - CAMEO í¬ë¡¤ë§ì— 2-5ë¶„ ì†Œìš”

2. í™”í•™ë¬¼ì§ˆëª…
   - ì˜ë¬¸ëª…ìœ¼ë¡œ ì…ë ¥ (ì˜ˆ: "Bleach", "Ammonia")
   - ìµœì†Œ 2ê°œ ì´ìƒ í•„ìš”

3. ì‘ë‹µ í•„ë“œ
   - risk_level: "ìœ„í—˜", "ì£¼ì˜", "ì•ˆì „" ì¤‘ í•˜ë‚˜
   - message: ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë©”ì‹œì§€ (í•œêµ­ì–´)
   - safety_links: MSDS ë° ì•ˆì „ ì •ë³´ ë§í¬

4. ì—ëŸ¬ ì²˜ë¦¬
   - HTTP 404: í™”í•™ë¬¼ì§ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
   - HTTP 500: ì„œë²„ ì˜¤ë¥˜
   - Timeout: 5ë¶„ ì´ˆê³¼ ì‹œ

5. Cold Start
   - ì²« ìš”ì²­ ì‹œ 30-60ì´ˆ ì¶”ê°€ ëŒ€ê¸° ê°€ëŠ¥ (Render sleep)


ğŸ“Š ì‘ë‹µ ì‹œê°„
============
- Health Check: <1ì´ˆ
- AI ì‚¬ìš©: 2-5ë¶„
- AI ë¯¸ì‚¬ìš©: 2-4ë¶„ (í¬ë¡¤ë§ë§Œ)


ğŸ”— ì¶”ê°€ ë¦¬ì†ŒìŠ¤
==============
- Swagger UI: https://chemical-analyzer-v2.onrender.com/docs
- GitHub: https://github.com/lemonminyoung/Nemo-jisanhak_ver2


ğŸ“ ë¬¸ì œ ë°œìƒ ì‹œ
===============
1. /health ì—”ë“œí¬ì¸íŠ¸ë¡œ ì„œë²„ ìƒíƒœ í™•ì¸
2. Timeoutì„ 300ì´ˆ ì´ìƒìœ¼ë¡œ ì„¤ì •í–ˆëŠ”ì§€ í™•ì¸
3. substances ë°°ì—´ì— ìµœì†Œ 2ê°œ ì´ìƒ ë¬¼ì§ˆì´ ìˆëŠ”ì§€ í™•ì¸
4. GitHub Issuesì— ë¬¸ì˜


ë.
